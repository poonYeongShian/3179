{
   "$schema":"https://vega.github.io/schema/vega-lite/v5.json",
   "background":"#fff7fb",
   "width": 620,
   "height":350,
   "title":"Number of EV car sold over the years",
   "data":{
      "url":"https://raw.githubusercontent.com/poonYeongShian/FIT3179/main/week10_homework/data/IEA-EV-dataEV-salesHistoricalCars.csv"
   },
   "params":[
      {
         "name":"current_year",
         "value":2018,
         "bind":{
            "input":"range",
            "min":2018,
            "max":2022,
            "step":1,
            "name":"Year: "
         }
      }
   ],
   "transform":[
      {
         "filter":{
            "timeUnit":"year",
            "field":"year",
            "equal":"current_year"
         }
      }
   ],
   "encoding":{
      "x":{
         "field":"value",
         "aggregate":"sum",
         "type":"quantitative",
         "title":"EV car sales (unit)"
      },
      "y":{
         "field":"region",
         "title":"Country",
         "sort":{
            "op":"sum",
            "field":"value",
            "order":"descending"
         }
      }
   },
   "layer":[
      {
         "mark":"bar",
         "encoding":{
            "color":{
               "field":"region",
               "type":"nominal",
               "scale":{
                  "range" : [
                     "#1F77B4FF",
                     "#FF7F0EFF",
                     "#2CA02CFF",
                     "#D62728FF",
                     "#9467BDFF",
                     "#BCBD22FF",
                     "#17BECFFF"
                  ]
               },
               "legend":null
            },
            "tooltip":[
               {
                  "field":"region",
                  "type":"nominal",
                  "title":"Country"
               },
               {
                  "field": "value",
                  "aggregate":"sum",
                  "type":"quantitative",
                  "title":"Number of EV car sold"
               }
            ]
         }
      },
      {
         "mark":{
            "type":"text",
            "align":"right",
            "xOffset":-2
         },
         "encoding":{
            "text":{
               "field": "value",
               "aggregate":"sum",
               "type":"quantitative"
            },
            "color":{
               "value":"white"
            }
         }
      }
   ]
}